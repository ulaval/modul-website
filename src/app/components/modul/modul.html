<div class="modul" :class="{'modul--menu-is-open' : menuOpen, 'modul--at-home' : isHome, 'modul--black-template' : isHome}">
    <header ref="header" class="modul-header">
        <h1 v-if="isHome" class="modul-logo">
            <router-link to="/">MOD<b>UL</b></router-link>
        </h1>
        <div v-if="!isHome" class="modul-logo">
            <router-link to="/">MOD<b>UL</b></router-link>
        </div>
        <nav class="modul-header__nav">
            <ul>
                <li>
                    <router-link :to="visualStandards" class="modul-header__link">
                        <m-i18n k="modul:visual-standards"></m-i18n>
                    </router-link>
                </li>
                <li>
                    <router-link :to="writingRules" class="modul-header__link">
                        <m-i18n k="modul:writing-rules"></m-i18n>
                    </router-link>
                </li>
                <li>
                    <a href="#" @click.prevent="showMenu()" class="modul-header__link">
                        <m-i18n k="modul:components"></m-i18n>
                    </a>
                </li>
                <li>
                    <router-link :to="ecosystem" class="modul-header__link">
                        <m-i18n k="modul:ecosystem"></m-i18n>
                    </router-link>
                </li>
            </ul>
        </nav>

        <m-button @click="toggleSearch" class="modul-header__search">
            <m-icon name="search"></m-icon>
        </m-button>

        <m-sidebar :open="searchOpen" from="right" width="400px" @open="searchOpen = true" @close="searchOpen = false" class-name="modul-search-sidebar" :paddingBody="false" classNamePortalTarget="modul-search-sidebar">
            <template slot="header">
                <m-icon name="search"></m-icon>
                <input type="text" v-model="searchModel" @key value="Rechercher un composant" class="modul-search-input">
            </template>

            <template slot="body">
                <transition-group name="search-anim" tag="ul">
                    <li class="modul-search-card" @click="onComponentClick(item.tag)" v-for="item in searchResult" key="item.tag">

                        <div class="modul-search-card__figure">
                            <!-- <img src=/assets/accordion.png alt="" aria-hidden="true"> -->
                        </div>

                        <div class="modul-search-card__content">

                            <p class="m-u--h4 m-u--no-margin-top">
                                {{item.text}}
                            </p>
                            <p class="modul-search-card__subtitle">
                                {{item.category}}
                            </p>

                        </div>

                    </li>
                </transition-group>
            </template>

        </m-sidebar>

    </header>

    <transition name="modul-menu">
        <nav class="modul-menu" v-if="headerAnimationCompleted" tabindex="0" ref="menu">
            <ul v-for="category in categories" class="modul-menu__list">
                <li>
                    <h2 @click="onCategoryClick($event, category)" tabindex="0" class="modul-menu__title modul-u--highlighted-title">
                        <span>{{category.text}}</span>
                    </h2>
                </li>
                <li v-for="component in getCategoryComponents(category.id)">
                    <a href="#" @click.prevent="onComponentClick(component.tag)" to="/" class="modul-menu__link">
                        <m-i18n :k="component.name" class="modul-menu__label"></m-i18n>
                    </a>
                </li>
            </ul>
        </nav>
    </transition>

    <div class="modul-body-container">
        <div class="modul-body">
            <main class="modul-page">
                <router-view></router-view>
            </main>
            <footer class="modul-footer">
                <div class="modul-footer__body">
                    <div class="modul-footer__logo">
                        <span>Propulsé par l'université Laval</span>
                    </div>
                    <div class="modul-footer__nav">
                        <a class="modul-footer__link" href="">Conditions d'utilisation</a>
                    </div>
                </div>
                <div class="modul-footer__version">
                    <span class="modul-logo"><a href="">MOD<b>UL</b></a></span>
                    <span>version 0.0.1</span>
                </div>
            </footer>
        </div>
    </div>

</div>